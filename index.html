<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xendra AI - Agentic AI</title>
    <link rel="icon" type="image/png" href="fav.png" />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        :root { --primary: #0ea5e9; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 20px auto; background: var(--card); padding: 30px; border-radius: 16px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); font-size: 2.5rem; margin-bottom: 10px; }
        .input-section { display: flex; flex-direction: column; gap: 15px; margin-bottom: 30px; }
        input { padding: 15px; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; font-size: 16px; }
        button { padding: 15px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; font-size: 16px; }
        button:hover { opacity: 0.9; transform: translateY(-2px); }
        button:disabled { background: #64748b; cursor: not-allowed; }
        #loading { display: none; text-align: center; margin: 20px 0; color: var(--primary); font-weight: bold; }
        #result { display: none; border-top: 1px solid #334155; padding-top: 30px; animation: fadeIn 0.5s; }
        .img-result { width: 100%; border-radius: 12px; margin-bottom: 25px; border: 1px solid #334155; }
        .content-area { line-height: 1.8; font-size: 17px; }
        pre { background: #0f172a !important; padding: 15px; border-radius: 8px; overflow-x: auto; border: 1px solid #334155; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="container">
    <h1>Xendra AI</h1>
    <p style="text-align: center; color: #94a3b8; margin-top: -10px;">General AI Agent • Real-time Research • SEO Expert</p>

    <div class="input-section">
        <input type="password" id="pass" placeholder="Password Akses...">
        <input type="text" id="prompt" placeholder="Tanya apa saja (Artikel SEO, Kode, atau Informasi)...">
        <button id="btnRun">Eksekusi Perintah</button>
    </div>

    <div id="loading">Xendra sedang berfikir dan meriset... ⚡</div>

    <div id="result">
        <img id="outImg" class="img-result" src="">
        <div id="outText" class="content-area"></div>
    </div>
</div>

<script>
    const btn = document.getElementById('btnRun');
    const loading = document.getElementById('loading');
    const resultDiv = document.getElementById('result');
    const outText = document.getElementById('outText');
    const outImg = document.getElementById('outImg');

    btn.onclick = async () => {
        const prompt = document.getElementById('prompt').value;
        const password = document.getElementById('pass').value;

        if(!prompt || !password) return alert("Password dan Prompt wajib diisi!");

        btn.disabled = true;
        loading.style.display = 'block';
        resultDiv.style.display = 'none';

        try {
            // GANTI DENGAN URL WORKER KAMU
            const response = await fetch('https://xendra-ai.vincent-ssb88.workers.dev', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt, password })
            });

            const data = await response.json();
            if(!response.ok) throw new Error(data.error);

            // Render Gambar
            outImg.src = data.imageUrl;
            
            // Render Teks & Koding
            outText.innerHTML = marked.parse(data.answer);
            
            // Highlight Koding jika ada
            document.querySelectorAll('pre code').forEach((el) => { hljs.highlightElement(el); });

            resultDiv.style.display = 'block';
        } catch (e) {
            alert("Error: " + e.message);
        } finally {
            btn.disabled = false;
            loading.style.display = 'none';
        }
    };
</script>

</body>
</html>
